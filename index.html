<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>yyovvo Studio ‚Äì Create Your Premier</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg: #02010a;
        --bg-alt: #050516;
        --accent: #f973ff;
        --accent2: #38bdf8;
        --accent-soft: rgba(248, 250, 252, 0.06);
        --text: #e5e7eb;
        --muted: #9ca3af;
        --danger: #f97373;
        --radius: 22px;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        background: radial-gradient(circle at top, #111827 0, #02010a 55%);
        color: var(--text);
        font-family: "Space Grotesk", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        -webkit-font-smoothing: antialiased;
      }

      body {
        display: flex;
        align-items: stretch;
        justify-content: center;
      }

      #root {
        width: 100%;
        min-height: 100vh;
        display: flex;
        align-items: stretch;
        justify-content: center;
      }

      .studio-shell {
        width: 100%;
        max-width: 1200px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      @media (min-width: 768px) {
        .studio-shell {
          padding: 24px 24px 32px;
        }
      }

      .studio-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
      }

      .studio-logo {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .studio-logo-badge {
        width: 32px;
        height: 32px;
        border-radius: 999px;
        background: radial-gradient(circle at 20% 0%, #f973ff, #38bdf8);
        box-shadow: 0 0 24px rgba(249, 115, 255, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 14px;
      }

      .studio-logo-text {
        display: flex;
        flex-direction: column;
      }

      .studio-logo-text span:first-child {
        font-weight: 600;
        letter-spacing: 0.16em;
        font-size: 11px;
        text-transform: uppercase;
        color: var(--muted);
      }

      .studio-logo-text span:last-child {
        font-weight: 600;
        font-size: 14px;
      }

      .studio-tag {
        padding: 4px 10px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.8);
        border: 1px solid rgba(148, 163, 184, 0.25);
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: var(--muted);
      }

      .studio-card {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 16px;
        overflow: hidden;
        border-radius: 28px;
        background: radial-gradient(
            circle at top left,
            rgba(248, 113, 255, 0.12),
            transparent 50%
          ),
          radial-gradient(
            circle at bottom right,
            rgba(56, 189, 248, 0.12),
            transparent 55%
          ),
          linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(6, 12, 30, 0.98));
        border: 1px solid rgba(148, 163, 184, 0.35);
        box-shadow: 0 40px 120px rgba(15, 23, 42, 0.9);
        padding: 18px;
      }

      @media (min-width: 768px) {
        .studio-card {
          padding: 24px;
        }
      }

      .studio-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
      }

      .studio-title-block {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .studio-eyebrow {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        color: var(--muted);
      }

      .studio-title {
        font-size: 22px;
        font-weight: 600;
      }

      @media (min-width: 768px) {
        .studio-title {
          font-size: 26px;
        }
      }

      .studio-subtitle {
        font-size: 13px;
        color: var(--muted);
      }

      .studio-step-indicator {
        display: flex;
        gap: 6px;
        align-items: center;
        font-size: 12px;
        color: var(--muted);
      }

      .studio-step-dots {
        display: flex;
        gap: 4px;
      }

      .step-dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: rgba(55, 65, 81, 0.9);
      }

      .step-dot.active {
        background: linear-gradient(135deg, var(--accent), var(--accent2));
        box-shadow: 0 0 12px rgba(248, 113, 255, 0.9);
      }

      .studio-main {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      @media (min-width: 900px) {
        .studio-main {
          flex-direction: row;
          gap: 18px;
        }
      }

      .studio-main-left,
      .studio-main-right {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      @media (min-width: 900px) {
        .studio-main-left {
          flex: 5;
        }
        .studio-main-right {
          flex: 4;
        }
      }

      .pill-row {
        display: inline-flex;
        padding: 4px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.3);
      }

      .pill {
        padding: 6px 14px;
        border-radius: 999px;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        cursor: pointer;
        color: var(--muted);
        border: none;
        background: transparent;
        transition: all 0.16s ease;
      }

      .pill.active {
        color: #f9fafb;
        background: linear-gradient(135deg, var(--accent), var(--accent2));
        box-shadow: 0 0 18px rgba(248, 113, 255, 0.9);
      }

      .mood-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 10px;
        margin-top: 8px;
      }

      @media (min-width: 900px) {
        .mood-grid {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
      }

      .mood-card {
        position: relative;
        border-radius: 18px;
        overflow: hidden;
        background: radial-gradient(circle at top, #1f2937, #020617);
        border: 1px solid rgba(148, 163, 184, 0.4);
        cursor: pointer;
        min-height: 150px;
        display: flex;
        align-items: flex-end;
        padding: 10px;
        transition: transform 0.18s ease, box-shadow 0.18s ease,
          border-color 0.18s ease;
      }

      .mood-card.selected {
        border-color: rgba(248, 113, 255, 0.9);
        box-shadow: 0 0 18px rgba(248, 113, 255, 0.6);
        transform: translateY(-3px);
      }

      .mood-badge {
        position: absolute;
        top: 8px;
        left: 8px;
        padding: 3px 8px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.75);
        color: var(--muted);
        font-size: 11px;
      }

      .mood-name {
        font-size: 13px;
        font-weight: 500;
      }

      .mood-note {
        font-size: 11px;
        color: var(--muted);
        margin-top: 2px;
      }

      .mood-fill {
        position: absolute;
        inset: 0;
        mix-blend-mode: screen;
        opacity: 0.9;
      }

      .mood-fill.gradient-1 {
        background: radial-gradient(circle at top, #f973ff, transparent 60%),
          radial-gradient(circle at bottom, #38bdf8, transparent 60%);
      }

      .mood-fill.gradient-2 {
        background: radial-gradient(circle at 10% 0%, #22c55e, transparent 55%),
          radial-gradient(circle at 90% 100%, #0ea5e9, transparent 60%);
      }

      .mood-fill.gradient-3 {
        background: radial-gradient(circle at top, #f97316, transparent 55%),
          radial-gradient(circle at bottom, #e11d48, transparent 60%);
      }

      .mood-overlay {
        position: relative;
        z-index: 1;
        background: linear-gradient(
          to top,
          rgba(15, 23, 42, 0.92),
          transparent
        );
        border-radius: inherit;
        padding: 8px;
      }

      .side-panel {
        border-radius: 20px;
        padding: 12px;
        background: rgba(15, 23, 42, 0.95);
        border: 1px solid rgba(55, 65, 81, 0.9);
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .side-title {
        font-size: 13px;
        font-weight: 500;
      }

      .side-text {
        font-size: 12px;
        color: var(--muted);
      }

      .side-tagline {
        font-size: 11px;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }

      .btn-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 6px;
      }

      .btn {
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.4);
        background: rgba(15, 23, 42, 0.95);
        color: var(--text);
        font-size: 12px;
        padding: 7px 14px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        cursor: pointer;
        transition: all 0.15s ease;
      }

      .btn span.icon {
        font-size: 14px;
      }

      .btn-primary {
        border-color: transparent;
        background: linear-gradient(135deg, var(--accent), var(--accent2));
        color: #0b1120;
        font-weight: 600;
        box-shadow: 0 0 22px rgba(248, 113, 255, 0.7);
      }

      .btn-primary:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        box-shadow: none;
      }

      .btn-ghost {
        background: transparent;
      }

      .btn-ghost-muted {
        border-style: dashed;
        color: var(--muted);
      }

      .btn-full {
        width: 100%;
        justify-content: center;
      }

      .step-footer {
        border-top: 1px solid rgba(31, 41, 55, 0.9);
        padding-top: 10px;
        margin-top: 4px;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-items: center;
        justify-content: space-between;
      }

      .step-hint {
        font-size: 11px;
        color: var(--muted);
      }

      .step-hint strong {
        color: #e5e7eb;
      }

      /* MESSAGE STEP */

      .message-type-row {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .message-type-pill {
        flex: 1;
        min-width: 90px;
        border-radius: 999px;
        padding: 8px 10px;
        border: 1px solid rgba(148, 163, 184, 0.4);
        display: flex;
        flex-direction: column;
        gap: 4px;
        cursor: pointer;
        background: rgba(15, 23, 42, 0.9);
        font-size: 11px;
        transition: all 0.16s ease;
      }

      .message-type-pill.active {
        border-color: rgba(248, 113, 255, 0.9);
        background: radial-gradient(circle at top, #f973ff22, transparent 60%);
        box-shadow: 0 0 16px rgba(248, 113, 255, 0.5);
      }

      .message-type-title {
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 500;
      }

      .message-type-badge {
        padding: 2px 6px;
        border-radius: 999px;
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        background: rgba(15, 23, 42, 0.9);
        color: var(--muted);
      }

      .message-type-desc {
        font-size: 11px;
        color: var(--muted);
      }

      .message-textarea {
        width: 100%;
        border-radius: 18px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        background: rgba(15, 23, 42, 0.96);
        color: var(--text);
        padding: 10px 12px;
        font-size: 13px;
        resize: none;
        min-height: 90px;
        outline: none;
      }

      .message-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 4px;
        font-size: 11px;
        color: var(--muted);
      }

      .message-meta span.strong {
        color: #e5e7eb;
      }

      /* PREVIEW STEP */

      .preview-frame {
        position: relative;
        width: 100%;
        padding-top: 177.78%; /* 9:16 */
        border-radius: 26px;
        overflow: hidden;
        background: radial-gradient(circle at top, #0f172a, #020617);
        border: 1px solid rgba(148, 163, 184, 0.5);
        box-shadow: 0 30px 100px rgba(15, 23, 42, 0.9);
      }

      .preview-inner {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        padding: 14px;
        background: radial-gradient(circle at top, transparent, #020617cc);
      }

      .preview-mood-label {
        position: absolute;
        top: 10px;
        left: 10px;
        padding: 4px 9px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.8);
        font-size: 10px;
        letter-spacing: 0.14em;
        text-transform: uppercase;
        color: var(--muted);
      }

      .preview-message {
        font-size: 16px;
        font-weight: 500;
        margin-bottom: 6px;
      }

      .preview-caption {
        font-size: 11px;
        color: var(--muted);
      }

      .preview-glow {
        position: absolute;
        inset: 0;
        background: radial-gradient(
          circle at bottom,
          rgba(248, 113, 255, 0.3),
          transparent 65%
        );
        mix-blend-mode: screen;
        opacity: 0.9;
      }

      .preview-footer-line {
        font-size: 11px;
        color: var(--muted);
        margin-top: 6px;
      }

      .preview-footer-line strong {
        color: #e5e7eb;
      }

      .preview-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 10px;
      }

      .badge-soft {
        padding: 3px 7px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.95);
        border: 1px solid rgba(55, 65, 81, 0.9);
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: var(--muted);
      }

      .error-text {
        font-size: 11px;
        color: var(--danger);
      }

      .loading-dot {
        display: inline-block;
        width: 3px;
        height: 3px;
        border-radius: 999px;
        background: var(--muted);
        margin-left: 2px;
        animation: pulse 1s infinite ease-in-out;
      }

      @keyframes pulse {
        0% {
          opacity: 0.2;
        }
        50% {
          opacity: 1;
        }
        100% {
          opacity: 0.2;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <!-- React / ReactDOM / Babel -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const { useState } = React;

      // --- Data: sample Moods ---
      const SAMPLE_MOODS = [
        {
          id: "midnight-ember",
          name: "Midnight Ember",
          tag: "Deep & cinematic",
          gradient: "gradient-1",
          note: "For late-night confessions and dangerous Christmas energy."
        },
        {
          id: "snow-halo",
          name: "Snow Halo",
          tag: "Soft & glowing",
          gradient: "gradient-2",
          note: "Warm lights, cold air, everything feels like a movie."
        },
        {
          id: "electric-mistletoe",
          name: "Electric Mistletoe",
          tag: "Fun & chaotic",
          gradient: "gradient-3",
          note: "For the cousins who shouldn't be left alone with eggnog."
        },
        {
          id: "ghost-of-xmas",
          name: "Ghost of Christmas Voice",
          tag: "Haunting & emotional",
          gradient: "gradient-1",
          note: "When you want your voice to follow them into January."
        },
        {
          id: "neon-sleigh",
          name: "Neon Sleigh Ride",
          tag: "High energy",
          gradient: "gradient-2",
          note: "Full-send energy. This is what TikTok was built for."
        },
        {
          id: "afterparty-snow",
          name: "Afterparty Snow",
          tag: "Delicate & late",
          gradient: "gradient-3",
          note: "For the 2am 'you up?' but make it cinematic."
        }
      ];

      // --- Step 1: Mood Page ---
      function MoodPage({ selectedMoodId, onSelectMood, onNext }) {
        const [activeTab, setActiveTab] = useState("Gallery");

        const handleSelect = (id) => {
          onSelectMood(id);
        };

        return (
          <div className="studio-card">
            <div className="studio-card-header">
              <div className="studio-title-block">
                <div className="studio-eyebrow">Step 1 ¬∑ Pick the Mood</div>
                <div className="studio-title">
                  How should this moment feel?
                </div>
                <div className="studio-subtitle">
                  This isn‚Äôt a template. It‚Äôs your opening shot. Choose the
                  vibe that matches the moment.
                </div>
              </div>
              <div className="studio-step-indicator">
                <div className="studio-step-dots">
                  <div className="step-dot active" />
                  <div className="step-dot" />
                  <div className="step-dot" />
                </div>
                <span>1 / 3</span>
              </div>
            </div>

            <div className="studio-main">
              <div className="studio-main-left">
                <div className="pill-row">
                  <button
                    className={
                      "pill" + (activeTab === "Gallery" ? " active" : "")
                    }
                    onClick={() => setActiveTab("Gallery")}
                  >
                    Gallery
                  </button>
                  <button
                    className={"pill" + (activeTab === "AI" ? " active" : "")}
                    onClick={() => setActiveTab("AI")}
                  >
                    AI Mood (Soon)
                  </button>
                  <button
                    className={
                      "pill" + (activeTab === "Saved" ? " active" : "")
                    }
                    onClick={() => setActiveTab("Saved")}
                  >
                    Your Library (Soon)
                  </button>
                </div>

                {activeTab === "Gallery" && (
                  <div className="mood-grid">
                    {SAMPLE_MOODS.map((mood) => (
                      <div
                        key={mood.id}
                        className={
                          "mood-card" +
                          (selectedMoodId === mood.id ? " selected" : "")
                        }
                        onClick={() => handleSelect(mood.id)}
                      >
                        <div
                          className={"mood-fill " + mood.gradient}
                          aria-hidden="true"
                        />
                        <div className="mood-overlay">
                          <div className="mood-badge">{mood.tag}</div>
                          <div className="mood-name">{mood.name}</div>
                          <div className="mood-note">{mood.note}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}

                {activeTab !== "Gallery" && (
                  <div
                    style={{
                      marginTop: 12,
                      padding: 14,
                      borderRadius: 18,
                      border: "1px dashed rgba(148,163,184,0.5)",
                      background: "rgba(15,23,42,0.9)",
                      fontSize: 13,
                      color: "var(--muted)"
                    }}
                  >
                    <strong>Coming very soon.</strong> AI will build entire
                    Mood packs for you. For tonight, hand-pick your favourite
                    vibe from the gallery.
                  </div>
                )}
              </div>

              <div className="studio-main-right">
                <div className="side-panel">
                  <div className="side-tagline">Studio tips</div>
                  <div className="side-title">Start with the feeling.</div>
                  <div className="side-text">
                    Don‚Äôt overthink it. Who‚Äôs this for? What do you want them
                    to feel in the first three seconds? Go for the Mood that
                    hits your gut.
                  </div>
                  <div className="btn-row">
                    <button
                      className="btn btn-ghost-muted"
                      type="button"
                      onClick={() => alert("Imagine a tiny ghost director whispering: ‚ÄúPick the one you secretly want.‚Äù")}
                    >
                      <span className="icon">üëª</span>
                      Surprise me (soon)
                    </button>
                  </div>
                </div>

                <div className="step-footer">
                  <div className="step-hint">
                    <strong>Pro tip:</strong> You can always come back and
                    change the Mood after hearing your message.
                  </div>
                  <button
                    className="btn btn-primary"
                    type="button"
                    disabled={!selectedMoodId}
                    onClick={onNext}
                  >
                    Next ¬∑ Add your message
                  </button>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // --- Step 2: Message Page ---
      function MessagePage({ mood, onBack, onContinue }) {
        const [messageType, setMessageType] = useState("text");
        const [text, setText] = useState("");
        const [charCount, setCharCount] = useState(0);

        const handleTextChange = (e) => {
          const val = e.target.value;
          setText(val);
          setCharCount(val.length);
        };

        const canContinue =
          messageType === "text" && text.trim().length > 0 && text.length <= 280;

        const handleContinue = () => {
          if (!canContinue) return;
          onContinue({
            type: "text",
            text: text.trim()
          });
        };

        return (
          <div className="studio-card">
            <div className="studio-card-header">
              <div className="studio-title-block">
                <div className="studio-eyebrow">Step 2 ¬∑ Add your message</div>
                <div className="studio-title">
                  Your voice is the main character.
                </div>
                <div className="studio-subtitle">
                  We‚Äôll wrap your words in cinema. For this first version, we
                  start with written messages. Voice & video come next.
                </div>
              </div>
              <div className="studio-step-indicator">
                <div className="studio-step-dots">
                  <div className="step-dot" />
                  <div className="step-dot active" />
                  <div className="step-dot" />
                </div>
                <span>2 / 3</span>
              </div>
            </div>

            <div className="studio-main">
              <div className="studio-main-left">
                <div className="message-type-row">
                  <div
                    className={
                      "message-type-pill" +
                      (messageType === "text" ? " active" : "")
                    }
                    onClick={() => setMessageType("text")}
                  >
                    <div className="message-type-title">
                      <span className="icon">üñä</span>
                      Text
                      <span className="message-type-badge">Live</span>
                    </div>
                    <div className="message-type-desc">
                      Short, sharp, cinematic lines. We‚Äôll dress them in snow
                      and neon.
                    </div>
                  </div>

                  <div
                    className={
                      "message-type-pill" +
                      (messageType === "voice" ? " active" : "")
                    }
                    onClick={() =>
                      alert(
                        "Voice capture will land next. For tonight, we go text-first and wire the pipeline."
                      )
                    }
                  >
                    <div className="message-type-title">
                      <span className="icon">üéô</span>
                      Voice
                      <span className="message-type-badge">Soon</span>
                    </div>
                    <div className="message-type-desc">
                      Whisper into the snow. We‚Äôll turn it into a ghost.
                    </div>
                  </div>

                  <div
                    className={
                      "message-type-pill" +
                      (messageType === "video" ? " active" : "")
                    }
                    onClick={() =>
                      alert(
                        "Video reactions will plug in after text + voice. One layer at a time."
                      )
                    }
                  >
                    <div className="message-type-title">
                      <span className="icon">üìπ</span>
                      Video
                      <span className="message-type-badge">Soon</span>
                    </div>
                    <div className="message-type-desc">
                      Face, chaos, energy. For now, imagine it.
                    </div>
                  </div>
                </div>

                <div style={{ marginTop: 14 }}>
                  <textarea
                    className="message-textarea"
                    placeholder="Type the line that will live in their head all Christmas‚Ä¶"
                    maxLength={280}
                    value={text}
                    onChange={handleTextChange}
                  />
                  <div className="message-meta">
                    <span>
                      <span className="strong">
                        Keep it tight. One cinematic thought.
                      </span>{" "}
                      We‚Äôll handle the snow.
                    </span>
                    <span>
                      {charCount} / 280
                    </span>
                  </div>
                </div>
              </div>

              <div className="studio-main-right">
                <div className="side-panel">
                  <div className="side-tagline">Direction</div>
                  <div className="side-title">Think like a trailer.</div>
                  <div className="side-text">
                    One line. One feeling. No essays. Write like you‚Äôre
                    dropping the first line of a movie they‚Äôll never forget.
                  </div>
                  <div className="btn-row">
                    <button
                      className="btn btn-ghost-muted"
                      type="button"
                      onClick={() =>
                        alert(
                          "Example: ‚ÄúThis Christmas, you‚Äôre my favourite glitch.‚Äù"
                        )
                      }
                    >
                      <span className="icon">‚ú®</span>
                      Show me an example
                    </button>
                  </div>
                </div>

                <div className="step-footer">
                  <div className="step-hint">
                    <strong>From:</strong> you, in 2050. Not you, in a Hallmark
                    aisle.
                  </div>
                  <div style={{ display: "flex", gap: 8 }}>
                    <button
                      className="btn btn-ghost"
                      type="button"
                      onClick={onBack}
                    >
                      Back
                    </button>
                    <button
                      className="btn btn-primary"
                      type="button"
                      disabled={!canContinue}
                      onClick={handleContinue}
                    >
                      Preview your Premier ‚Üí
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // --- Step 3: Preview / Render Page ---
      function PreviewPage({ mood, message, onBack, onRender }) {
        const [isSubmitting, setIsSubmitting] = useState(false);
        const [submitError, setSubmitError] = useState(null);

        const handleRenderClick = async () => {
          setSubmitError(null);
          setIsSubmitting(true);
          try {
            await onRender();
          } catch (err) {
            console.error(err);
            setSubmitError(
              "Could not save your Premier into yyovvo right now. Try again in a moment."
            );
          } finally {
            setIsSubmitting(false);
          }
        };

        return (
          <div className="studio-card">
            <div className="studio-card-header">
              <div className="studio-title-block">
                <div className="studio-eyebrow">Step 3 ¬∑ Premier</div>
                <div className="studio-title">
                  Watch it like the world will see it.
                </div>
                <div className="studio-subtitle">
                  This is your trailer. Mood, message, and magic in one frame.
                  Next click sends it into yyovvo‚Äôs engine.
                </div>
              </div>
              <div className="studio-step-indicator">
                <div className="studio-step-dots">
                  <div className="step-dot" />
                  <div className="step-dot" />
                  <div className="step-dot active" />
                </div>
                <span>3 / 3</span>
              </div>
            </div>

            <div className="studio-main">
              <div className="studio-main-left">
                <div className="preview-frame">
                  <div className="preview-glow" />
                  <div className="preview-inner">
                    <div className="preview-mood-label">
                      {mood ? mood.name : "Your Mood"}
                    </div>
                    <div className="preview-message">
                      {message?.text || "Your line will appear here."}
                    </div>
                    <div className="preview-caption">
                      Snow, streetlight, a ghost of your voice. We‚Äôll stitch
                      these into a 16-second Premier.
                    </div>
                  </div>
                </div>
                <div className="preview-footer-line">
                  <strong>Note:</strong> This preview is a concept frame. The
                  real thing will be rendered as full cinematic video on the
                  yyovvo side.
                </div>
              </div>

              <div className="studio-main-right">
                <div className="side-panel">
                  <div className="side-tagline">Almost there</div>
                  <div className="side-title">
                    ‚ÄúDouble y-o, double v-o‚Äù does the rest.
                  </div>
                  <div className="side-text">
                    On the yyovvo side, we‚Äôll attach snow, light, The Mark, and
                    delivery rails. You‚Äôre one click away from locking this
                    into the system.
                  </div>
                  {submitError && (
                    <div className="error-text">{submitError}</div>
                  )}
                </div>

                <div className="step-footer">
                  <div className="step-hint">
                    Your Premier will be saved as a{" "}
                    <strong>StudioPremier</strong> in yyovvo with status{" "}
                    <strong>pending</strong>. Then we teach it to glow.
                  </div>
                  <div style={{ display: "flex", gap: 8 }}>
                    <button
                      className="btn btn-ghost"
                      type="button"
                      onClick={onBack}
                    >
                      Back
                    </button>
                    <button
                      className="btn btn-primary"
                      type="button"
                      disabled={isSubmitting}
                      onClick={handleRenderClick}
                    >
                      {isSubmitting ? (
                        <>
                          Saving to yyovvo
                          <span className="loading-dot" />
                          <span className="loading-dot" />
                          <span className="loading-dot" />
                        </>
                      ) : (
                        <>Render my Premier ‚Üí</>
                      )}
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // --- App wiring with POST to yyovvo backend ---
      function App() {
        const [step, setStep] = useState(1);
        const [selectedMoodId, setSelectedMoodId] = useState(null);
        const [messageData, setMessageData] = useState(null);

        const API_URL = "https://yyovvo.com/api/studio-premier";

        const selectedMood = SAMPLE_MOODS.find(
          (m) => m.id === selectedMoodId
        ) || null;

        async function handleRenderPremier() {
          if (!selectedMood || !messageData) {
            alert("Pick a Mood and add a message first.");
            return;
          }

          if (messageData.type !== "text") {
            alert(
              "For this first version, we only send written messages into yyovvo. Voice & video wiring is next."
            );
            return;
          }

          const payload = {
            mood_id: selectedMood.id || null,
            mood_url: null,
            message_type: "text",
            message_audio_url: null,
            message_video_url: null,
            message_text: messageData.text || "",
            duration_s: 16,
            user_agent:
              typeof navigator !== "undefined" ? navigator.userAgent : "",
            origin: "studio.yyovvo.com"
          };

          const res = await fetch(API_URL, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(payload)
          });

          let data = {};
          try {
            data = await res.json();
          } catch (e) {
            // ignore parse error
          }

          if (!res.ok || !data.ok) {
            throw new Error(data.error || "Validation failed");
          }

          alert(
            "Premier saved to yyovvo ‚úÖ\n\nStudio ID: " +
              data.studio_id +
              "\nStatus: " +
              data.status +
              "\n\nNext steps happen on yyovvo.com (render, Wall, send & share)."
          );
        }

        let content = null;

        if (step === 1) {
          content = (
            <MoodPage
              selectedMoodId={selectedMoodId}
              onSelectMood={setSelectedMoodId}
              onNext={() => {
                if (!selectedMoodId) return;
                setStep(2);
              }}
            />
          );
        } else if (step === 2) {
          content = (
            <MessagePage
              mood={selectedMood}
              onBack={() => setStep(1)}
              onContinue={(msg) => {
                setMessageData(msg);
                setStep(3);
              }}
            />
          );
        } else {
          content = (
            <PreviewPage
              mood={selectedMood}
              message={messageData}
              onBack={() => setStep(2)}
              onRender={handleRenderPremier}
            />
          );
        }

        return (
          <div className="studio-shell">
            <header className="studio-header">
              <div className="studio-logo">
                <div className="studio-logo-badge">yy</div>
                <div className="studio-logo-text">
                  <span>yyovvo studio</span>
                  <span>Every moment gets a Premier.</span>
                </div>
              </div>
              <div className="studio-tag">Christmas 2025 ¬∑ Beta</div>
            </header>
            {content}
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
