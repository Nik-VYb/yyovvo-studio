<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>yyovvo Studio ¬∑ Premier</title>
    <style>
      :root {
        --bg-deep: #050509;
        --bg-panel: rgba(15, 23, 42, 0.98);
        --accent-pink: #f973ff;
        --accent-blue: #38bdf8;
        --accent-gold: #facc15;
        --muted: #9ca3af;
        --text-main: #f9fafb;
        --danger: #f97373;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        background: radial-gradient(circle at top, #020617 0, #000 60%);
        color: var(--text-main);
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", sans-serif;
        -webkit-font-smoothing: antialiased;
      }

      .full-page {
        min-height: 100vh;
        width: 100vw;
        display: flex;
        flex-direction: column;
        background: radial-gradient(circle at top, #111827 0, #02010a 55%);
      }

      .shell {
        max-width: 980px;
        margin: 0 auto;
        padding: 16px 16px 32px;
      }

      .studio-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding-bottom: 4px;
      }

      .studio-title-block {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .studio-title {
        font-size: 22px;
        font-weight: 600;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        background: linear-gradient(135deg, #f973ff, #38bdf8);
        -webkit-background-clip: text;
        color: transparent;
      }

      .studio-subtitle {
        font-size: 12px;
        color: var(--muted);
      }

      .studio-pill {
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 11px;
        border: 1px solid rgba(148, 163, 184, 0.6);
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: radial-gradient(circle at top, #020617, #040016);
      }

      .studio-pill span.dot {
        width: 7px;
        height: 7px;
        border-radius: 999px;
        background: radial-gradient(circle at center, #22c55e, #14532d);
        box-shadow: 0 0 8px rgba(34, 197, 94, 0.8);
      }

      .section-title {
        font-size: 18px;
        font-weight: 600;
        margin: 12px 0 4px;
        text-align: left;
      }

      .section-subtitle {
        font-size: 13px;
        color: var(--muted);
        margin-bottom: 12px;
      }

      /* MODE PICKER */

      .mode-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 14px;
        margin-top: 8px;
      }

      .mode-card {
        position: relative;
        border-radius: 22px;
        padding: 16px 14px 14px;
        background: radial-gradient(circle at top, #111827, #020617);
        border: 1px solid rgba(148, 163, 184, 0.5);
        cursor: pointer;
        transition: 0.2s ease;
        overflow: hidden;
      }

      .mode-card::before {
        content: "";
        position: absolute;
        inset: -40%;
        background: conic-gradient(
          from 220deg,
          rgba(248, 113, 255, 0.25),
          rgba(56, 189, 248, 0.05),
          rgba(250, 204, 21, 0.18),
          rgba(248, 113, 255, 0.25)
        );
        opacity: 0;
        transition: opacity 0.2s ease;
        pointer-events: none;
      }

      .mode-card:hover::before {
        opacity: 0.16;
      }

      .mode-card-content {
        position: relative;
        z-index: 1;
      }

      .mode-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 10px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.92);
        border: 1px solid rgba(148, 163, 184, 0.7);
        font-size: 11px;
        color: #e5e7eb;
        margin-bottom: 6px;
      }

      .mode-badge span.star {
        font-size: 14px;
      }

      .mode-title {
        font-size: 15px;
        font-weight: 600;
        margin-bottom: 4px;
      }

      .mode-body {
        font-size: 12px;
        color: var(--muted);
        margin-bottom: 10px;
      }

      .mode-foot {
        font-size: 11px;
        color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 6px;
      }

      .mode-tag {
        padding: 4px 9px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: var(--muted);
      }

      .mode-card.selected {
        border-color: var(--accent-pink);
        box-shadow: 0 0 30px rgba(249, 115, 255, 0.65);
        transform: translateY(-1px);
      }

      /* BUTTONS */

      .primary-button {
        margin-top: 18px;
        padding: 14px;
        border-radius: 999px;
        font-size: 15px;
        text-align: center;
        background: linear-gradient(135deg, #f973ff, #38bdf8);
        cursor: pointer;
        transition: 0.18s ease;
        font-weight: 600;
        color: #020617;
        border: none;
      }

      .primary-button:hover {
        opacity: 0.92;
      }

      .primary-button.disabled {
        opacity: 0.35;
        cursor: not-allowed;
        box-shadow: none;
      }

      .ghost-button {
        margin-top: 10px;
        padding: 10px;
        border-radius: 999px;
        font-size: 13px;
        text-align: center;
        background: transparent;
        border: 1px solid rgba(107, 114, 128, 0.9);
        cursor: pointer;
        color: #e5e7eb;
      }

      .ghost-button:hover {
        background: rgba(15, 23, 42, 0.94);
      }

      /* AI MODE */

      .ai-panel {
        margin-top: 16px;
        padding: 16px;
        border-radius: 20px;
        background: radial-gradient(circle at top left, #0b1120, #020617 55%);
        border: 1px solid rgba(148, 163, 184, 0.7);
      }

      .ai-label {
        font-size: 13px;
        margin-bottom: 6px;
      }

      .ai-sub {
        font-size: 12px;
        color: var(--muted);
        margin-bottom: 10px;
      }

      .ai-input-wrap {
        position: relative;
      }

      .ai-input {
        width: 100%;
        border-radius: 16px;
        border: 1px solid rgba(148, 163, 184, 0.8);
        background: rgba(15, 23, 42, 0.96);
        color: var(--text-main);
        padding: 10px 12px;
        font-size: 14px;
        outline: none;
      }

      .ai-placeholder {
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(148, 163, 184, 0.7);
        font-size: 13px;
        pointer-events: none;
        transition: opacity 0.2s ease;
      }

      .ai-input:not(:placeholder-shown) + .ai-placeholder,
      .ai-input:focus + .ai-placeholder {
        opacity: 0;
      }

      .ai-suggestions {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 10px;
      }

      .ai-chip {
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 11px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        cursor: pointer;
        background: rgba(15, 23, 42, 0.95);
        color: #e5e7eb;
      }

      .ai-chip:hover {
        border-color: var(--accent-pink);
      }

      /* UPLOAD MODE */

      .upload-panel {
        margin-top: 16px;
        padding: 16px;
        border-radius: 20px;
        background: radial-gradient(circle at top right, #020617, #000 60%);
        border: 1px dashed rgba(148, 163, 184, 0.7);
      }

      .upload-zone {
        border-radius: 18px;
        border: 1px dashed rgba(148, 163, 184, 0.7);
        background: rgba(15, 23, 42, 0.9);
        padding: 14px;
        text-align: center;
        font-size: 12px;
        color: var(--muted);
      }

      .upload-zone strong {
        color: #e5e7eb;
      }

      .upload-preview {
        margin-top: 12px;
        border-radius: 18px;
        overflow: hidden;
        position: relative;
        border: 1px solid rgba(148, 163, 184, 0.7);
      }

      .upload-preview img {
        width: 100%;
        display: block;
        animation: kenBurns 10s ease-in-out infinite;
        transform-origin: center;
      }

      .upload-overlay {
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at bottom, rgba(15, 23, 42, 0.3), transparent 60%);
      }

      @keyframes kenBurns {
        0% {
          transform: scale(1.02);
        }
        50% {
          transform: scale(1.06) translateY(-1%);
        }
        100% {
          transform: scale(1.02);
        }
      }

      /* MOOD GRID (MANUAL MODE) */

      .mood-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 12px;
        margin-top: 12px;
      }

      .mood-card {
        position: relative;
        border-radius: 18px;
        height: 170px;
        cursor: pointer;
        overflow: hidden;
        border: 1px solid rgba(148, 163, 184, 0.6);
        background: radial-gradient(circle at top, #1f2937, #020617);
        color: #e5e7eb;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        padding: 10px;
        font-size: 13px;
        transition: 0.18s ease;
      }

      .mood-card::before {
        content: "";
        position: absolute;
        inset: -40%;
        opacity: 0;
        transition: opacity 0.18s ease;
        pointer-events: none;
      }

      .mood-card:hover::before {
        opacity: 0.4;
      }

      .mood-card.selected {
        border-color: var(--accent-pink);
        box-shadow: 0 0 26px rgba(249, 115, 255, 0.7);
        transform: translateY(-1.5px);
      }

      .mood-name {
        font-weight: 600;
        font-size: 13px;
      }

      .mood-tagline {
        font-size: 11px;
        color: var(--muted);
      }

      .mood-chip-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 4px;
      }

      .mood-chip {
        font-size: 10px;
        padding: 3px 8px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.8);
      }

      /* MOOD ANIMATIONS */

      .mood-ember::before {
        background: radial-gradient(circle at bottom, #7f1d1d, #0b0f19 55%);
        animation: emberPulse 7s ease-in-out infinite;
      }

      .mood-snow::before {
        background: radial-gradient(circle at top, #e5f2ff, #020617 65%);
        animation: snowDrift 9s linear infinite;
      }

      .mood-mistletoe::before {
        background: radial-gradient(circle at top, #16a34a, #020617 60%);
        animation: neonSweep 6s ease-in-out infinite;
      }

      .mood-countdown::before {
        background: conic-gradient(
          from 180deg,
          #fbbf24,
          #38bdf8,
          #a855f7,
          #f97316,
          #fbbf24
        );
        animation: orbitGlow 11s linear infinite;
      }

      .mood-champagne::before {
        background: radial-gradient(circle at bottom, #facc15, #111827 60%);
        animation: bubbleRise 10s ease-in-out infinite;
      }

      .mood-eternal::before {
        background: radial-gradient(circle at center, #f97316, #020617 70%);
        animation: slowPulse 12s ease-in-out infinite;
      }

      @keyframes emberPulse {
        0% {
          transform: translateY(0);
          opacity: 0.8;
        }
        50% {
          transform: translateY(-2%);
          opacity: 1;
        }
        100% {
          transform: translateY(0);
          opacity: 0.8;
        }
      }

      @keyframes snowDrift {
        0% {
          transform: translateY(-4%);
        }
        100% {
          transform: translateY(4%);
        }
      }

      @keyframes neonSweep {
        0% {
          filter: blur(6px);
        }
        50% {
          filter: blur(12px);
        }
        100% {
          filter: blur(6px);
        }
      }

      @keyframes orbitGlow {
        0% {
          transform: rotate(0deg) scale(1.02);
        }
        100% {
          transform: rotate(360deg) scale(1.02);
        }
      }

      @keyframes bubbleRise {
        0% {
          transform: translateY(4%);
        }
        50% {
          transform: translateY(-4%);
        }
        100% {
          transform: translateY(4%);
        }
      }

      @keyframes slowPulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.04);
        }
        100% {
          transform: scale(1);
        }
      }

      /* MESSAGE STEP */

      .message-panel {
        margin-top: 16px;
        padding: 16px;
        border-radius: 20px;
        background: radial-gradient(circle at top, #0b1120, #020617 65%);
        border: 1px solid rgba(148, 163, 184, 0.9);
      }

      .message-label {
        font-size: 13px;
        margin-bottom: 6px;
      }

      .message-sub {
        font-size: 12px;
        color: var(--muted);
        margin-bottom: 10px;
      }

      textarea {
        width: 100%;
        height: 120px;
        border-radius: 16px;
        padding: 10px 12px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        outline: none;
        font-size: 14px;
        background: rgba(15, 23, 42, 0.96);
        color: var(--text-main);
        resize: none;
      }

      .char-count {
        font-size: 11px;
        color: var(--muted);
        text-align: right;
        padding: 4px 4px 0 0;
      }

      /* PREVIEW */

      .preview-shell {
        margin-top: 20px;
        border-radius: 24px;
        padding: 14px;
        background: radial-gradient(circle at top, #020617, #000 70%);
        border: 1px solid rgba(148, 163, 184, 0.85);
        box-shadow: 0 26px 70px rgba(15, 23, 42, 0.95);
      }

      .preview-top-label {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.18em;
        color: var(--muted);
        margin-bottom: 8px;
      }

      .preview-frame {
        position: relative;
        border-radius: 26px;
        height: 440px;
        overflow: hidden;
        background: radial-gradient(circle at top, #1f2937, #020617);
        border: 1px solid rgba(148, 163, 184, 0.85);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 16px;
      }

      .preview-mood-layer {
        position: absolute;
        inset: 0;
        pointer-events: none;
      }

      .preview-content {
        position: relative;
        z-index: 2;
        text-align: center;
        max-width: 80%;
      }

      .preview-mood-name {
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 6px;
      }

      .preview-message {
        font-size: 16px;
        line-height: 1.4;
        text-shadow: 0 0 18px rgba(15, 23, 42, 0.9);
      }

      .preview-footer {
        margin-top: 10px;
        display: flex;
        justify-content: center;
        gap: 6px;
        font-size: 10px;
        color: var(--muted);
      }

      .preview-footer span.dot {
        width: 4px;
        height: 4px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.8);
        align-self: center;
      }

      .bottom-buttons {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 18px;
      }

      .loading-dots {
        display: inline-block;
        margin-left: 6px;
      }

      .loading-dots span {
        display: inline-block;
        width: 3px;
        height: 3px;
        border-radius: 999px;
        background: #111827;
        margin: 0 1px;
        animation: pulse 1s infinite ease-in-out;
      }

      .loading-dots span:nth-child(2) {
        animation-delay: 0.2s;
      }

      .loading-dots span:nth-child(3) {
        animation-delay: 0.35s;
      }

      @keyframes pulse {
        0% {
          opacity: 0.3;
        }
        50% {
          opacity: 1;
        }
        100% {
          opacity: 0.3;
        }
      }

      .error-text {
        margin-top: 8px;
        font-size: 11px;
        color: var(--danger);
      }

      @media (max-width: 640px) {
        .shell {
          padding: 12px 10px 24px;
        }
        .studio-header {
          flex-direction: column;
          align-items: flex-start;
        }
        .preview-frame {
          height: 400px;
        }
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <!-- React UMD -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <script type="text/javascript">
      const { useState, useEffect } = React;

      // üéÑ yyovvo Cinematic Moods
      const MOODS = [
        {
          id: "xmas_midnight_ember",
          name: "Midnight Ember",
          category: "Christmas",
          tagline: "Candlelit, intimate, deep winter warmth.",
          cssClass: "mood-ember",
        },
        {
          id: "xmas_snow_halo",
          name: "Snow Halo",
          category: "Christmas",
          tagline: "Soft snow, distant bells, haloed light.",
          cssClass: "mood-snow",
        },
        {
          id: "xmas_electric_mistletoe",
          name: "Electric Mistletoe",
          category: "Christmas",
          tagline: "Neon green mistletoe, playful and bold.",
          cssClass: "mood-mistletoe",
        },
        {
          id: "ny_countdown_glow",
          name: "Countdown Glow",
          category: "New Year",
          tagline: "Midnight lights, seconds before everything changes.",
          cssClass: "mood-countdown",
        },
        {
          id: "ny_champagne_pulse",
          name: "Champagne Pulse",
          category: "New Year",
          tagline: "Golden bubbles rising into next year.",
          cssClass: "mood-champagne",
        },
        {
          id: "ever_eternal_flame",
          name: "Eternal Flame",
          category: "Always On",
          tagline: "One bright flame that never goes out.",
          cssClass: "mood-eternal",
        },
      ];

      const AI_PLACEHOLDERS = [
        "Wish someone a magical Christmas‚Ä¶",
        "Tell someone you‚Äôre thinking of them tonight‚Ä¶",
        "Make them smile when they see this‚Ä¶",
        "Send a New Year spark they won‚Äôt forget‚Ä¶",
        "Say what you can‚Äôt quite say out loud‚Ä¶",
      ];

      const AI_CHIPS = [
        "Cute Christmas for my girlfriend",
        "Something cosy for my mum",
        "Funny message for my best mate",
        "New Year hype for the group chat",
        "Soft, romantic, late-night vibe",
      ];

      function StudioApp() {
        const [mode, setMode] = useState(null); // "ai" | "upload" | "mood"
        const [step, setStep] = useState(0); // 0 = mode select
        const [selectedMoodId, setSelectedMoodId] = useState(null);

        const [aiPrompt, setAiPrompt] = useState("");
        const [aiPlaceholderIndex, setAiPlaceholderIndex] = useState(0);

        const [messageText, setMessageText] = useState("");
        const [aiSeeded, setAiSeeded] = useState(false);

        const [uploadPreviewUrl, setUploadPreviewUrl] = useState(null);
        const [uploadFileName, setUploadFileName] = useState("");

        const [isSubmitting, setIsSubmitting] = useState(false);
        const [error, setError] = useState("");

        // Cloudflare Worker endpoint
        const API_URL =
          "https://yyovvo-studio-ingest.yyovvouk.workers.dev/";

        // Rotate AI ghost placeholders
        useEffect(() => {
          const id = setInterval(() => {
            setAiPlaceholderIndex((idx) => (idx + 1) % AI_PLACEHOLDERS.length);
          }, 2800);
          return () => clearInterval(id);
        }, []);

        // If AI mode and aiPrompt set but messageText not yet seeded, generate suggestion
        useEffect(() => {
          if (mode === "ai" && aiPrompt.trim() && !aiSeeded) {
            const suggestion = buildAIMsgSuggestion(aiPrompt);
            setMessageText(suggestion);
            setAiSeeded(true);
          }
        }, [mode, aiPrompt, aiSeeded]);

        const currentMood =
          MOODS.find((m) => m.id === selectedMoodId) || MOODS[0];

        function resetFlow() {
          setMode(null);
          setStep(0);
          setSelectedMoodId(null);
          setAiPrompt("");
          setAiSeeded(false);
          setMessageText("");
          setUploadPreviewUrl(null);
          setUploadFileName("");
          setIsSubmitting(false);
          setError("");
        }

        function handleSelectMode(nextMode) {
          setMode(nextMode);
          setStep(nextMode === "ai" ? 1 : 1);
          setError("");

          // Default mood selection for AI & Upload
          if (!selectedMoodId) {
            if (nextMode === "ai") {
              setSelectedMoodId("xmas_snow_halo"); // magical default
            } else if (nextMode === "upload") {
              setSelectedMoodId("xmas_midnight_ember"); // intimate frame
            }
          }
        }

        function handleUploadChange(e) {
          const file = e.target.files && e.target.files[0];
          if (!file) return;
          setUploadFileName(file.name);

          const reader = new FileReader();
          reader.onload = function (event) {
            setUploadPreviewUrl(event.target.result);
          };
          reader.readAsDataURL(file);
        }

        function handleContinueFromAI() {
          if (!aiPrompt.trim()) {
            setError("Give yyovvo something to work with first.");
            return;
          }
          if (!messageText.trim()) {
            const suggestion = buildAIMsgSuggestion(aiPrompt);
            setMessageText(suggestion);
          }
          setStep(2);
          setError("");
        }

        function handleContinueFromUpload() {
          if (!uploadPreviewUrl) {
            setError("Drop in a photo or clip first.");
            return;
          }
          setStep(2);
          setError("");
        }

        function handleContinueFromMood() {
          if (!selectedMoodId) {
            setError("Tap a Mood first.");
            return;
          }
          setStep(2);
          setError("");
        }

        function handleBackStep() {
          if (step === 2) {
            // Return to respective first step for mode
            setStep(1);
          } else if (step === 1) {
            // Back to mode picker
            setStep(0);
            setMode(null);
          } else {
            resetFlow();
          }
        }

        async function handleRenderPremier() {
          setError("");
          if (!currentMood || !messageText.trim()) {
            setError("Mood and message must both be in place.");
            return;
          }

          const payload = {
            entry_mode: mode || "mood",
            mood_id: currentMood.id,
            mood_name: currentMood.name,
            mood_category: currentMood.category,
            message_type: "text",
            message_text: messageText.trim(),
            message_audio_url: null,
            message_video_url: null,
            upload_preview: uploadPreviewUrl || null,
            duration_s: 16,
            user_agent:
              typeof navigator !== "undefined" ? navigator.userAgent : "",
            origin: "yyovvo-studio.pages.dev",
          };

          setIsSubmitting(true);

          try {
            const res = await fetch(API_URL, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });

            const rawText = await res.text();
            let data = null;
            try {
              data = JSON.parse(rawText);
            } catch (e) {
              // leave as text if not JSON
            }

            if (!res.ok || !data || data.ok === false) {
              setError(
                "yyovvo Studio backend error.\n\nStatus: " +
                  res.status +
                  "\n\nBody:\n" +
                  rawText
              );
              return;
            }

            const premierId = data.id || data.studio_id || "";
            const viewerUrl =
              "https://yyovvo-studio.pages.dev/viewer.html?id=" +
              encodeURIComponent(premierId);

            alert(
              "Premier saved into yyovvo Studio ‚úÖ\n\n" +
                "Your live link:\n" +
                viewerUrl +
                "\n\n(Tap OK to open your Premier.)"
            );

            if (viewerUrl) {
              window.location.href = viewerUrl;
            }
          } catch (err) {
            setError(
              "Network / CORS error reaching yyovvo Studio backend:\n\n" +
                (err && err.message ? err.message : String(err))
            );
          } finally {
            setIsSubmitting(false);
          }
        }

        // ---- RENDER ----

        if (step === 0) {
          return (
            React.createElement(
              "div",
              { className: "full-page" },
              React.createElement(
                "div",
                { className: "shell" },
                React.createElement(
                  "div",
                  { className: "studio-header" },
                  React.createElement(
                    "div",
                    { className: "studio-title-block" },
                    React.createElement(
                      "div",
                      { className: "studio-title" },
                      "yyovvo Studio"
                    ),
                    React.createElement(
                      "div",
                      { className: "studio-subtitle" },
                      "Every great Christmas deserves a trailer. Build yours in three taps."
                    )
                  ),
                  React.createElement(
                    "div",
                    { className: "studio-pill" },
                    React.createElement("span", { className: "dot" }),
                    React.createElement(
                      "span",
                      null,
                      "Live Studio ¬∑ Christmas 2025"
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "section-title" },
                  "How do you want to start?"
                ),
                React.createElement(
                  "div",
                  { className: "section-subtitle" },
                  "Pick the doorway. Every path still gives you a full-screen yyovvo Premier with music, Mood and message."
                ),
                React.createElement(
                  "div",
                  { className: "mode-grid" },
                  React.createElement(
                    "div",
                    {
                      className:
                        "mode-card" + (mode === "ai" ? " selected" : ""),
                      onClick: function () {
                        handleSelectMode("ai");
                      },
                    },
                    React.createElement(
                      "div",
                      { className: "mode-card-content" },
                      React.createElement(
                        "div",
                        { className: "mode-badge" },
                        React.createElement("span", { className: "star" }, "‚ú®"),
                        "Recommended ¬∑ Zero thinking"
                      ),
                      React.createElement(
                        "div",
                        { className: "mode-title" },
                        "AI Studio"
                      ),
                      React.createElement(
                        "div",
                        { className: "mode-body" },
                        "Tell yyovvo who it‚Äôs for, we‚Äôll choose the Mood and write the line."
                      ),
                      React.createElement(
                        "div",
                        { className: "mode-foot" },
                        React.createElement(
                          "span",
                          null,
                          "Type one sentence. We do the rest."
                        ),
                        React.createElement(
                          "span",
                          { className: "mode-tag" },
                          "Magic mode"
                        )
                      )
                    )
                  ),
                  React.createElement(
                    "div",
                    {
                      className:
                        "mode-card" + (mode === "upload" ? " selected" : ""),
                      onClick: function () {
                        handleSelectMode("upload");
                      },
                    },
                    React.createElement(
                      "div",
                      { className: "mode-card-content" },
                      React.createElement(
                        "div",
                        { className: "mode-badge" },
                        React.createElement(
                          "span",
                          { className: "star" },
                          "üì∑"
                        ),
                        "Turn a photo into a trailer"
                      ),
                      React.createElement(
                        "div",
                        { className: "mode-title" },
                        "Upload"
                      ),
                      React.createElement(
                        "div",
                        { className: "mode-body" },
                        "Drop in a Christmas photo or clip. We wrap it in light and snow."
                      ),
                      React.createElement(
                        "div",
                        { className: "mode-foot" },
                        React.createElement(
                          "span",
                          null,
                          "Perfect for real moments."
                        ),
                        React.createElement(
                          "span",
                          { className: "mode-tag" },
                          "Photo mode"
                        )
                      )
                    )
                  ),
                  React.createElement(
                    "div",
                    {
                      className:
                        "mode-card" + (mode === "mood" ? " selected" : ""),
                      onClick: function () {
                        handleSelectMode("mood");
                      },
                    },
                    React.createElement(
                      "div",
                      { className: "mode-card-content" },
                      React.createElement(
                        "div",
                        { className: "mode-badge" },
                        React.createElement(
                          "span",
                          { className: "star" },
                          "üéû"
                        ),
                        "Pick from yyovvo‚Äôs cinema"
                      ),
                      React.createElement(
                        "div",
                        { className: "mode-title" },
                        "yyovvo Moods"
                      ),
                      React.createElement(
                        "div",
                        { className: "mode-body" },
                        "Tap a pre-made cinematic Mood, then write your line on top."
                      ),
                      React.createElement(
                        "div",
                        { className: "mode-foot" },
                        React.createElement(
                          "span",
                          null,
                          "For creators and aesthetes."
                        ),
                        React.createElement(
                          "span",
                          { className: "mode-tag" },
                          "Director mode"
                        )
                      )
                    )
                  )
                ),
                React.createElement(
                  "button",
                  {
                    className:
                      "primary-button" + (!mode ? " disabled" : ""),
                    onClick: !mode
                      ? null
                      : function () {
                          // step already set inside handleSelectMode, but ensure
                          if (mode && step === 0) setStep(1);
                        },
                  },
                  mode
                    ? "Continue ¬∑ Step 1 ‚Üí"
                    : "Choose a starting doorway to continue"
                ),
                React.createElement(
                  "button",
                  {
                    className: "ghost-button",
                    onClick: resetFlow,
                  },
                  "Reset Studio"
                )
              )
            )
          );
        }

        // Step 1: depending on mode
        if (step === 1 && mode === "ai") {
          return (
            React.createElement(
              "div",
              { className: "full-page" },
              React.createElement(
                "div",
                { className: "shell" },
                React.createElement(
                  "div",
                  { className: "studio-header" },
                  React.createElement(
                    "div",
                    { className: "studio-title-block" },
                    React.createElement(
                      "div",
                      { className: "studio-title" },
                      "AI Studio"
                    ),
                    React.createElement(
                      "div",
                      { className: "studio-subtitle" },
                      "Tell yyovvo who it‚Äôs for. We‚Äôll choose the Mood and whisper the first line."
                    )
                  ),
                  React.createElement(
                    "div",
                    { className: "studio-pill" },
                    React.createElement("span", { className: "dot" }),
                    React.createElement(
                      "span",
                      null,
                      "Step 1 ¬∑ Intention"
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "ai-panel" },
                  React.createElement(
                    "div",
                    { className: "ai-label" },
                    "Who is this for, and how do you want it to feel?"
                  ),
                  React.createElement(
                    "div",
                    { className: "ai-sub" },
                    "One sentence is enough. We‚Äôll wrap it in snow, light and music."
                  ),
                  React.createElement(
                    "div",
                    { className: "ai-input-wrap" },
                    React.createElement("input", {
                      className: "ai-input",
                      value: aiPrompt,
                      onChange: function (e) {
                        setAiPrompt(e.target.value);
                        setAiSeeded(false);
                      },
                      placeholder: " ", // real placeholder empty, we use custom ghost
                    }),
                    React.createElement(
                      "div",
                      { className: "ai-placeholder" },
                      AI_PLACEHOLDERS[aiPlaceholderIndex]
                    )
                  ),
                  React.createElement(
                    "div",
                    { className: "ai-suggestions" },
                    AI_CHIPS.map(function (chip) {
                      return React.createElement(
                        "div",
                        {
                          key: chip,
                          className: "ai-chip",
                          onClick: function () {
                            setAiPrompt(chip);
                            setAiSeeded(false);
                          },
                        },
                        chip
                      );
                    })
                  )
                ),
                error &&
                  React.createElement(
                    "div",
                    { className: "error-text" },
                    error
                  ),
                React.createElement(
                  "button",
                  {
                    className:
                      "primary-button" + (!aiPrompt.trim() ? " disabled" : ""),
                    onClick: aiPrompt.trim() ? handleContinueFromAI : null,
                  },
                  "Next ¬∑ Let yyovvo choose your Mood ‚Üí"
                ),
                React.createElement(
                  "button",
                  {
                    className: "ghost-button",
                    onClick: handleBackStep,
                  },
                  "‚Üê Back"
                )
              )
            )
          );
        }

        if (step === 1 && mode === "upload") {
          return (
            React.createElement(
              "div",
              { className: "full-page" },
              React.createElement(
                "div",
                { className: "shell" },
                React.createElement(
                  "div",
                  { className: "studio-header" },
                  React.createElement(
                    "div",
                    { className: "studio-title-block" },
                    React.createElement(
                      "div",
                      { className: "studio-title" },
                      "Upload a moment"
                    ),
                    React.createElement(
                      "div",
                      { className: "studio-subtitle" },
                      "Turn a photo or clip into a cinematic trailer."
                    )
                  ),
                  React.createElement(
                    "div",
                    { className: "studio-pill" },
                    React.createElement("span", { className: "dot" }),
                    React.createElement(
                      "span",
                      null,
                      "Step 1 ¬∑ Scene"
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "upload-panel" },
                  React.createElement(
                    "div",
                    { className: "upload-zone" },
                    React.createElement(
                      "div",
                      null,
                      React.createElement("strong", null, "Drop a Christmas photo or clip"),
                      " or tap to choose."
                    ),
                    React.createElement("input", {
                      type: "file",
                      accept: "image/*,video/*",
                      style: { marginTop: "10px", fontSize: "11px" },
                      onChange: handleUploadChange,
                    }),
                    React.createElement(
                      "div",
                      {
                        style: {
                          marginTop: "8px",
                          fontSize: "11px",
                          color: "var(--muted)",
                        },
                      },
                      "Best results: upright portrait, 3‚Äì10s, something that already feels like a memory."
                    )
                  ),
                  uploadPreviewUrl &&
                    React.createElement(
                      "div",
                      { className: "upload-preview" },
                      React.createElement("img", {
                        src: uploadPreviewUrl,
                        alt: "Upload preview",
                      }),
                      React.createElement("div", { className: "upload-overlay" })
                    ),
                  uploadFileName &&
                    React.createElement(
                      "div",
                      {
                        style: {
                          marginTop: "6px",
                          fontSize: "11px",
                          color: "#e5e7eb",
                        },
                      },
                      "Loaded: ",
                      uploadFileName
                    )
                ),
                error &&
                  React.createElement(
                    "div",
                    { className: "error-text" },
                    error
                  ),
                React.createElement(
                  "button",
                  {
                    className:
                      "primary-button" +
                      (!uploadPreviewUrl ? " disabled" : ""),
                    onClick: uploadPreviewUrl ? handleContinueFromUpload : null,
                  },
                  "Next ¬∑ Add your line ‚Üí"
                ),
                React.createElement(
                  "button",
                  {
                    className: "ghost-button",
                    onClick: handleBackStep,
                  },
                  "‚Üê Back"
                )
              )
            )
          );
        }

        if (step === 1 && mode === "mood") {
          return (
            React.createElement(
              "div",
              { className: "full-page" },
              React.createElement(
                "div",
                { className: "shell" },
                React.createElement(
                  "div",
                  { className: "studio-header" },
                  React.createElement(
                    "div",
                    { className: "studio-title-block" },
                    React.createElement(
                      "div",
                      { className: "studio-title" },
                      "Pick your Mood"
                    ),
                    React.createElement(
                      "div",
                      { className: "studio-subtitle" },
                      "These are yyovvo‚Äôs cinema environments. This is your opening shot."
                    )
                  ),
                  React.createElement(
                    "div",
                    { className: "studio-pill" },
                    React.createElement("span", { className: "dot" }),
                    React.createElement(
                      "span",
                      null,
                      "Step 1 ¬∑ Mood"
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "mood-grid" },
                  MOODS.map(function (m) {
                    return React.createElement(
                      "div",
                      {
                        key: m.id,
                        className:
                          "mood-card " +
                          (m.cssClass || "") +
                          (selectedMoodId === m.id ? " selected" : ""),
                        onClick: function () {
                          setSelectedMoodId(m.id);
                        },
                      },
                      React.createElement(
                        "div",
                        { className: "mood-name" },
                        m.name
                      ),
                      React.createElement(
                        "div",
                        { className: "mood-tagline" },
                        m.tagline
                      ),
                      React.createElement(
                        "div",
                        { className: "mood-chip-row" },
                        React.createElement(
                          "div",
                          { className: "mood-chip" },
                          m.category
                        ),
                        React.createElement(
                          "div",
                          {
                            style: {
                              fontSize: "10px",
                              color: "rgba(243,244,246,0.85)",
                            },
                          },
                          "Loop ¬∑ 3‚Äì6s"
                        )
                      )
                    );
                  })
                ),
                error &&
                  React.createElement(
                    "div",
                    { className: "error-text" },
                    error
                  ),
                React.createElement(
                  "button",
                  {
                    className:
                      "primary-button" + (!selectedMoodId ? " disabled" : ""),
                    onClick: selectedMoodId ? handleContinueFromMood : null,
                  },
                  "Next ¬∑ Write your line ‚Üí"
                ),
                React.createElement(
                  "button",
                  {
                    className: "ghost-button",
                    onClick: handleBackStep,
                  },
                  "‚Üê Back"
                )
              )
            )
          );
        }

        // Step 2: Message + Preview (shared across modes)
        if (step === 2) {
          const isUploadMode = mode === "upload";
          const animClass = currentMood.cssClass || "";

          return (
            React.createElement(
              "div",
              { className: "full-page" },
              React.createElement(
                "div",
                { className: "shell" },
                React.createElement(
                  "div",
                  { className: "studio-header" },
                  React.createElement(
                    "div",
                    { className: "studio-title-block" },
                    React.createElement(
                      "div",
                      { className: "studio-title" },
                      "Write the line they‚Äôll remember"
                    ),
                    React.createElement(
                      "div",
                      { className: "studio-subtitle" },
                      "This sits on top of your Mood, with music under everything."
                    )
                  ),
                  React.createElement(
                    "div",
                    { className: "studio-pill" },
                    React.createElement("span", { className: "dot" }),
                    React.createElement(
                      "span",
                      null,
                      "Step 2 ¬∑ Message + Preview"
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "message-panel" },
                  React.createElement(
                    "div",
                    { className: "message-label" },
                    "Type the sentence they‚Äôll replay in their head."
                  ),
                  React.createElement(
                    "div",
                    { className: "message-sub" },
                    "Keep it tight. We‚Äôll handle the pacing, the glow and the music."
                  ),
                  React.createElement(
                    "textarea",
                    {
                      value: messageText,
                      maxLength: 280,
                      onChange: function (e) {
                        setMessageText(e.target.value);
                      },
                      placeholder:
                        "Tell them what you really wanted to say all year‚Ä¶",
                    }
                  ),
                  React.createElement(
                    "div",
                    { className: "char-count" },
                    messageText.length,
                    " / 280"
                  )
                ),
                React.createElement(
                  "div",
                  { className: "preview-shell" },
                  React.createElement(
                    "div",
                    { className: "preview-top-label" },
                    "Premier ¬∑ Live preview"
                  ),
                  React.createElement(
                    "div",
                    { className: "preview-frame" },
                    isUploadMode &&
                      uploadPreviewUrl &&
                      React.createElement(
                        "div",
                        {
                          className: "preview-mood-layer",
                          style: {
                            overflow: "hidden",
                          },
                        },
                        React.createElement("img", {
                          src: uploadPreviewUrl,
                          alt: "Upload background",
                          style: {
                            width: "100%",
                            height: "100%",
                            objectFit: "cover",
                            animation: "kenBurns 12s ease-in-out infinite",
                          },
                        }),
                        React.createElement("div", {
                          style: {
                            position: "absolute",
                            inset: 0,
                            background:
                              "radial-gradient(circle at bottom, rgba(15,23,42,0.65), rgba(15,23,42,0.1) 60%, rgba(15,23,42,0.85))",
                          },
                        })
                      ),
                    !isUploadMode &&
                      React.createElement("div", {
                        className: "preview-mood-layer " + animClass,
                      }),
                    React.createElement(
                      "div",
                      { className: "preview-content" },
                      React.createElement(
                        "div",
                        { className: "preview-mood-name" },
                        currentMood.name
                      ),
                      React.createElement(
                        "div",
                        { className: "preview-message" },
                        messageText.trim()
                          ? messageText
                          : "This is where your line will live, floating in snow and music."
                      )
                    )
                  ),
                  React.createElement(
                    "div",
                    { className: "preview-footer" },
                    React.createElement(
                      "span",
                      null,
                      "Full-screen cinematic loop ¬∑ Instrumental track under everything"
                    ),
                    React.createElement("span", { className: "dot" }),
                    React.createElement(
                      "span",
                      null,
                      "Anonymous by default ¬∑ Signature optional later"
                    )
                  )
                ),
                error &&
                  React.createElement(
                    "div",
                    { className: "error-text" },
                    error
                  ),
                React.createElement(
                  "div",
                  { className: "bottom-buttons" },
                  React.createElement(
                    "button",
                    {
                      className:
                        "primary-button" +
                        (!messageText.trim() || isSubmitting
                          ? " disabled"
                          : ""),
                      onClick:
                        !messageText.trim() || isSubmitting
                          ? null
                          : handleRenderPremier,
                    },
                    isSubmitting
                      ? React.createElement(
                          React.Fragment,
                          null,
                          "Saving your Premier to yyovvo",
                          React.createElement(
                            "span",
                            { className: "loading-dots" },
                            React.createElement("span", null),
                            React.createElement("span", null),
                            React.createElement("span", null)
                          )
                        )
                      : "Render my Premier ‚Üí"
                  ),
                  React.createElement(
                    "button",
                    {
                      className: "ghost-button",
                      onClick: handleBackStep,
                    },
                    "‚Üê Back"
                  )
                )
              )
            )
          );
        }

        // Fallback (should never hit)
        return React.createElement(
          "div",
          { className: "full-page" },
          React.createElement(
            "div",
            { className: "shell" },
            React.createElement(
              "div",
              null,
              "yyovvo Studio is thinking‚Ä¶"
            )
          )
        );
      }

      function buildAIMsgSuggestion(prompt) {
        const p = prompt.trim();
        if (!p) return "";
        const lower = p.toLowerCase();
        if (lower.includes("girlfriend")) {
          return "You‚Äôre the part of Christmas I never want to miss.";
        }
        if (lower.includes("mum") || lower.includes("mom") || lower.includes("mother")) {
          return "Every Christmas feels safer because you‚Äôre in it.";
        }
        if (lower.includes("mate") || lower.includes("friend") || lower.includes("best")) {
          return "Thanks for being the chaos and the calm this year.";
        }
        if (lower.includes("new year") || lower.includes("2026") || lower.includes("next year")) {
          return "Next year hits different with you in it.";
        }
        if (lower.includes("crush") || lower.includes("love")) {
          return "Christmas feels louder every time I think of you.";
        }
        // Default soft line
        return "I just wanted you to feel seen for a few seconds.";
      }

      ReactDOM.createRoot(document.getElementById("root")).render(
        React.createElement(StudioApp)
      );
    </script>
  </body>
</html>
